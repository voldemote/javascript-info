<!DOCTYPE html><html lang="en" data-theme-enabled="1"><head><script>window.currentUser = null;</script><script>window.shopCurrency = "EUR";</script><script>window.localCurrency = "EUR";</script><script>window.countryCode = "in";</script><script>window.rateShopTo = {"EUR":0.9999999999999999,"USD":1.0421899328621245,"AMD":412.8948076013165};</script><title itemprop="name">Blob</title><link href="pack/styles.c582d23a0695e653a6d3.css" rel="stylesheet"><meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=yes, minimum-scale=1.0"><meta name="apple-mobile-web-app-capable" content="yes"><script>if (window.devicePixelRatio > 1) document.cookie = 'pixelRatio=' + window.devicePixelRatio + ';path=/;expires=Tue, 19 Jan 2038 03:14:07 GMT';</script><link href="css?family=Open+Sans:bold,italic,bolditalic" rel="stylesheet"><link rel="apple-touch-icon-precomposed" href="img/favicon/apple-touch-icon-precomposed.png"><link rel="canonical" href="blob.html"><meta name="msapplication-TileColor" content="#222A2C"><meta name="msapplication-TileImage" content="/img/favicon/tileicon.png"><link rel="icon" href="img/favicon/favicon.png"><meta itemprop="image" content="https://javascript.info/img/site_preview_en_512x512.png"><meta property="og:title" content="Blob"><meta property="og:image" content="https://javascript.info/img/site_preview_en_1200x630.png"><meta property="og:image:type" content="image/png"><meta property="og:image:width" content="1200"><meta property="og:image:height" content="630"><meta property="fb:admins" content="100001562528165"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Blob"><meta name="twitter:site" content="@iliakan"><meta name="twitter:creator" content="@iliakan"><meta name="twitter:image" content="https://javascript.info/img/site_preview_en_512x512.png"><meta name="google-adsense-account" content="ca-pub-6204518652652613"><link rel="prev" href="text-decoder.html"><link rel="next" href="file.html"><script>window.GA_ID = "UA-2056213-15";</script><script>window.YANDEX_METRIKA_ID = 32184394;</script><script>{function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-2LWB61WGYJ")}</script>
<script async="" src="gtag/js?id=G-2LWB61WGYJ"></script><script>window.metrika={reachGoal:function(){}},window.yandex_metrika_callbacks=[function(){try{window.metrika=new Ya.Metrika({id:YANDEX_METRIKA_ID,webvisor:!0,clickmap:!0,params:{user:window.currentUser&&window.currentUser.id}}),metrika.trackLinks({delay:150}),window.addEventListener("error",function(r){window.metrika.reachGoal("JSERROR",{src:(r.filename||r.errorUrl)+": "+(r.lineno||r.errorLine),stack:r.stack||r.error&&r.error.stack,message:r.message})})}catch(r){}}];</script><script src="metrika/watch.js" async=""></script><script>window.RECAPTCHA_ID = "6LfmLAEVAAAAAJMykMnf7aY8nkyTRmYi2ynx51R1";</script><script src="pack/init.c620e89b5f96f3cade19.js"></script><script src="pack/head.29ecd440936f755366ca.js" defer=""></script><meta property="og:title" content="Blob"><meta property="og:type" content="article"><script src="pack/tutorial.406b23ff3b61da7d7091.js" defer=""></script><script src="pack/footer.818a809d6860f4026867.js" defer=""></script></head><body class="no-icons"><script>window.fontTest();</script><div class="page-wrapper page-wrapper_sidebar_on"><!--[if IE]><div style="color:red;text-align:center">Sorry, Internet Explorer is not supported, please use a newer browser.</div><![endif]--><div class="sitetoolbar sitetoolbar_tutorial"><script>window.langs = [{"code":"ar","name":"Arabic"},{"code":"az","name":"Azerbaijani"},{"code":"bg","name":"Bulgarian"},{"code":"bn","name":"Bengali"},{"code":"bs","name":"Bosnian"},{"code":"ca","name":"Catalan"},{"code":"cs","name":"Czech"},{"code":"da","name":"Danish"},{"code":"de","name":"German"},{"code":"el","name":"Greek"},{"code":"en","name":"English"},{"code":"es","name":"Spanish"},{"code":"fa","name":"Persian (Farsi)"},{"code":"fi","name":"Finnish"},{"code":"fr","name":"French"},{"code":"he","name":"Hebrew"},{"code":"hi","name":"Hindi"},{"code":"hr","name":"Croatian"},{"code":"hu","name":"Hungarian"},{"code":"hy","name":"Armenian"},{"code":"id","name":"Indonesian"},{"code":"it","name":"Italian"},{"code":"ja","name":"Japanese"},{"code":"ka","name":"Georgian"},{"code":"kk","name":"Kazakh"},{"code":"km","name":"Central Khmer"},{"code":"ko","name":"Korean"},{"code":"ku","name":"Kurdish"},{"code":"ky","name":"Kyrgyz"},{"code":"lt","name":"Lithuanian"},{"code":"me","name":"Montenegrin"},{"code":"ml","name":"Malayalam"},{"code":"ms","name":"Malay"},{"code":"my","name":"Burmese"},{"code":"nl","name":"Dutch"},{"code":"no","name":"Norvegian"},{"code":"pa","name":"Punjabi"},{"code":"pl","name":"Polish"},{"code":"pt","name":"Portuguese"},{"code":"ro","name":"Romanian"},{"code":"ru","name":"Russian"},{"code":"si","name":"Sinhala"},{"code":"sk","name":"Slovak"},{"code":"sl","name":"Slovenian"},{"code":"sq","name":"Albanian"},{"code":"sr","name":"Serbian"},{"code":"ta","name":"Tamil"},{"code":"te","name":"Telugu"},{"code":"test","name":"Test"},{"code":"th","name":"Thai"},{"code":"tk","name":"Turkmen"},{"code":"tr","name":"Turkish"},{"code":"ug","name":"Uyghur"},{"code":"uk","name":"Ukrainian"},{"code":"ur","name":"Urdu"},{"code":"uz","name":"Uzbek"},{"code":"v2","name":"v2"},{"code":"vi","name":"Vietnamese"},{"code":"zh-hant","name":"Chinese Traditional"},{"code":"zh","name":"Chinese"}];</script><script>window.lang = "en";</script><script>{
  let id = "notify-en-move";
  let message = `
    We have moved to a new server. If you encounter any issues, please contact us at <a href="mailto:help@javascript.info">help@javascript.info</a>.
  `;

  let tmpl = `<div class="notification notification_top notification_info sitetoolbar__notification" style="display:none" id="${id}">
        <div class="notification__content">${message}</div>
        <button class="notification__close" title="Close"></button>
      </div>`;

  document.write(tmpl);

  showTopNotification();
}

</script><div class="sitetoolbar__content"><div class="sitetoolbar__lang-switcher"><button class="sitetoolbar__dropdown-button" data-dropdown-toggler="">EN</button><div class="sitetoolbar__dropdown-wrap"><div class="sitetoolbar__dropdown-body"><div class="sitetoolbar__lang-switcher-body"><div class="supported-langs supported-langs_toolbar"><div class="supported-langs__container"><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://ar.javascript.info/blob"><span class="supported-langs__brief">AR</span><span class="supported-langs__title">عربي</span></a></li><li class="supported-langs__item supported-langs__item_current"><a class="supported-langs__link" href="blob.html"><span class="supported-langs__brief">EN</span><span class="supported-langs__title">English</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://es.javascript.info/blob"><span class="supported-langs__brief">ES</span><span class="supported-langs__title">Español</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://fa.javascript.info/"><span class="supported-langs__brief">FA</span><span class="supported-langs__title">فارسی</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://fr.javascript.info/blob"><span class="supported-langs__brief">FR</span><span class="supported-langs__title">Français</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://id.javascript.info/blob"><span class="supported-langs__brief">ID</span><span class="supported-langs__title">Indonesia</span></a></li></ul><ul class="supported-langs__list" style="height:200px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://it.javascript.info/blob"><span class="supported-langs__brief">IT</span><span class="supported-langs__title">Italiano</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://ja.javascript.info/blob"><span class="supported-langs__brief">JA</span><span class="supported-langs__title">日本語</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://ko.javascript.info/blob"><span class="supported-langs__brief">KO</span><span class="supported-langs__title">한국어</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://learn.javascript.ru/blob"><span class="supported-langs__brief">RU</span><span class="supported-langs__title">Русский</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://tr.javascript.info/blob"><span class="supported-langs__brief">TR</span><span class="supported-langs__title">Türkçe</span></a></li><li class="supported-langs__item"><a class="supported-langs__link" href="https://uk.javascript.info/blob"><span class="supported-langs__brief">UK</span><span class="supported-langs__title">Українська</span></a></li></ul><ul class="supported-langs__list" style="height:20px"><li class="supported-langs__item"><a class="supported-langs__link" href="https://zh.javascript.info/blob"><span class="supported-langs__brief">ZH</span><span class="supported-langs__title">简体中文</span></a></li></ul></div><div class="supported-langs__text"><p>We want to make this open-source project available for people all around the world.</p> <p><a href="translate.html">Help to translate</a> the content of this tutorial to your language!</p>
</div></div></div></div></div></div><div class="sitetoolbar__logo-wrap"><a class="sitetoolbar__link sitetoolbar__link_logo" href="index.htm"><img class="sitetoolbar__logo sitetoolbar__logo_normal" src="img/sitetoolbar__logo_en.svg" width="200" alt="" role="presentation"><img class="sitetoolbar__logo sitetoolbar__logo_normal sitetoolbar__logo_dark" src="img/sitetoolbar__logo_en-white.svg" width="200" alt="" role="presentation"><img class="sitetoolbar__logo sitetoolbar__logo_small" src="img/sitetoolbar__logo_small_en.svg" width="70" alt="" role="presentation"><img class="sitetoolbar__logo sitetoolbar__logo_small sitetoolbar__logo_dark" src="img/sitetoolbar__logo_small_en-white.svg" width="70" alt="" role="presentation"><script>Array.prototype.forEach.call(document.querySelectorAll("img.sitetoolbar__logo"),function(e){let t=document.createElement("object");t.type="image/svg+xml",t.className=e.className,t.style.cssText="left:0;top:0;position:absolute",t.onload=function(){t.onload=null,e.style.visibility="hidden"},t.data=e.src,e.parentNode.insertBefore(t,e)});</script></a></div><div class="sitetoolbar__nav-toggle-wrap"><button class="sitetoolbar__nav-toggle" type="button"></button></div><nav class="sitetoolbar__sections"><ul class="sitetoolbar__sections-list"></ul></nav><div class="sitetoolbar__right-button-wrap"><a class="sitetoolbar-right-button sitetoolbar-right-button_courses" href="ebook.html"><span class="sitetoolbar-right-button__extra-text">Buy</span>EPUB/PDF</a></div><div class="sitetoolbar__login-wrap"><button class="sitetoolbar__login sitetoolbar__login_unready" data-action-login=""></button></div><div class="sitetoolbar__theme-switcher"><div class="theme-changer"><label class="theme-changer__label" for="theme-changer-input" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input" data-theme-changer="data-theme-changer"><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span></label></div></div><div class="sitetoolbar__search-wrap"><div class="sitetoolbar__search-content"><button class="sitetoolbar__search-toggle" type="button"></button><form class="sitetoolbar__search" method="GET" action="/search"><div class="sitetoolbar__search-input"><div class="text-input"><input class="text-input__control" name="query" placeholder="Search on Javascript.info" required="required" type="text"></div><button class="sitetoolbar__find" type="submit">Search</button></div></form></div></div></div><div class="tablet-menu"><div class="tablet-menu__line"><div class="tablet-menu__content"><form class="tablet-menu-search" action="/search/"><input class="tablet-menu-search__input" type="search" name="query" placeholder="Search in the tutorial" required="required"><button class="tablet-menu-search__button" type="submit" name="type" value="articles">Search</button></form></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><a class="map" href="tutorial/map.html" data-action="tutorial-map"><span class="map__text">Tutorial map</span></a></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="theme-changer theme-changer_tablet-menu theme-changer_has-label"><label class="theme-changer__label" for="theme-changer-input-tablet" data-tooltip="Change theme"><input class="theme-changer__input" type="checkbox" id="theme-changer-input-tablet" data-theme-changer="data-theme-changer"><span class="theme-changer__icon theme-changer__icon_light-theme"></span><span class="theme-changer__icon theme-changer__icon_dark-theme"></span><span class="theme-changer__label-text theme-changer__label-text_light-theme">Light theme</span><span class="theme-changer__label-text theme-changer__label-text_dark-theme">Dark theme</span></label></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><div class="share-icons"><span class="share-icons__title">Share</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Fblob" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fjavascript.info%2Fblob" rel="nofollow"></a></div></div></div><div class="tablet-menu__line"><div class="tablet-menu__content"><select class="tablet-menu__nav input-select input-select input-select_small" onchange="if(this.value) window.location.href=this.value"><option value="https://ar.javascript.info/blob">عربي</option><option value="https://javascript.info/blob" selected="">English</option><option value="https://es.javascript.info/blob">Español</option><option value="https://fa.javascript.info/">فارسی</option><option value="https://fr.javascript.info/blob">Français</option><option value="https://id.javascript.info/blob">Indonesia</option><option value="https://it.javascript.info/blob">Italiano</option><option value="https://ja.javascript.info/blob">日本語</option><option value="https://ko.javascript.info/blob">한국어</option><option value="https://learn.javascript.ru/blob">Русский</option><option value="https://tr.javascript.info/blob">Türkçe</option><option value="https://uk.javascript.info/blob">Українська</option><option value="https://zh.javascript.info/blob">简体中文</option></select></div></div></div><progress class="tutorial-progress" data-sticky="" value="3" max="4" data-tooltip="Lesson 3 of 4"></progress></div><div class="page page_sidebar_on page_inner_padding"><script>if(localStorage.noSidebar){document.querySelector(".page").classList.remove("page_sidebar_on");let e=document.querySelector(".page-wrapper");e&&e.classList.remove("page-wrapper_sidebar_on")}setTimeout(function(){document.querySelector(".page").classList.add("page_sidebar-animation-on")});</script><div class="page__inner"><main class="main main_width-limit"><header class="main__header"><div class="main__header-inner"><div class="main__header-group"><ol class="breadcrumbs"><li class="breadcrumbs__item breadcrumbs__item_home"><a class="breadcrumbs__link" href="index.htm"><span class="breadcrumbs__hidden-text">Tutorial</span></a></li><li class="breadcrumbs__item" id="breadcrumb-1"><a class="breadcrumbs__link" href="binary.html"><span>Binary data, files</span></a></li><script type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Tutorial","item":"https://javascript.info/"},{"@type":"ListItem","position":2,"name":"Binary data, files","item":"https://javascript.info/binary"}]}</script></ol><div class="updated-at" data-tooltip="Last updated on May 16, 2022"><div class="updated-at__content">May 16, 2022</div></div></div><h1 class="main__header-title">Blob</h1></div></header><div class="content"><article class="formatted" itemscope="" itemtype="http://schema.org/TechArticle"><meta itemprop="name" content="Blob"><div itemprop="author" itemscope="" itemtype="http://schema.org/Person"><meta itemprop="email" content="iliakan@gmail.com"><meta itemprop="name" content="Ilya Kantor"></div><div itemprop="articleBody"><p><code>ArrayBuffer</code> and views are a part of ECMA standard, a part of JavaScript.</p>
<p>In the browser, there are additional higher-level objects, described in <a href="https://www.w3.org/TR/FileAPI/">File API</a>, in particular <code>Blob</code>.</p>
<p><code>Blob</code> consists of an optional string <code>type</code> (a MIME-type usually), plus <code>blobParts</code> – a sequence of other <code>Blob</code> objects, strings and <code>BufferSource</code>.</p>
<figure><div class="image" style="width:659px">
      <div class="image__ratio" style="padding-top:16.84370257966616%"></div>
      <object type="image/svg+xml" data="article/blob/blob.svg" width="659" height="111" class="image__image" data-use-theme="">
        <img src="article/blob/blob.svg" alt="" width="659" height="111">
      </object>
      </div></figure><p>The constructor syntax is:</p>
<div id="cch6oivo9n" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>new Blob(blobParts, options);</code></pre>
        </div>
      </div>
      
      </div><ul>
<li><strong><code>blobParts</code></strong> is an array of <code>Blob</code>/<code>BufferSource</code>/<code>String</code> values.</li>
<li><strong><code>options</code></strong> optional object:
<ul>
<li><strong><code>type</code></strong> – <code>Blob</code> type, usually MIME-type, e.g. <code>image/png</code>,</li>
<li><strong><code>endings</code></strong> – whether to transform end-of-line to make the <code>Blob</code> correspond to current OS newlines (<code>\r\n</code> or <code>\n</code>). By default <code>&quot;transparent&quot;</code> (do nothing), but also can be <code>&quot;native&quot;</code> (transform).</li>
</ul>
</li>
</ul>
<p>For example:</p>
<div id="r2fo7266mt" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>// create Blob from a string
let blob = new Blob([&quot;&lt;html&gt;…&lt;/html&gt;&quot;], {type: 'text/html'});
// please note: the first argument must be an array [...]</code></pre>
        </div>
      </div>
      
      </div><div id="kmm8wr065o" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>// create Blob from a typed array and strings
let hello = new Uint8Array([72, 101, 108, 108, 111]); // &quot;Hello&quot; in binary form

let blob = new Blob([hello, ' ', 'world'], {type: 'text/plain'});</code></pre>
        </div>
      </div>
      
      </div><p>We can extract <code>Blob</code> slices with:</p>
<div id="ai7pnyo5cb" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>blob.slice([byteStart], [byteEnd], [contentType]);</code></pre>
        </div>
      </div>
      
      </div><ul>
<li><strong><code>byteStart</code></strong> – the starting byte, by default 0.</li>
<li><strong><code>byteEnd</code></strong> – the last byte (exclusive, by default till the end).</li>
<li><strong><code>contentType</code></strong> – the <code>type</code> of the new blob, by default the same as the source.</li>
</ul>
<p>The arguments are similar to <code>array.slice</code>, negative numbers are allowed too.</p>
<div class="important important_smart">
            <div class="important__header"><span class="important__type"><code>Blob</code> objects are immutable</span></div>
            <div class="important__content"><p>We can’t change data directly in a <code>Blob</code>, but we can slice parts of a <code>Blob</code>, create new <code>Blob</code> objects from them, mix them into a new <code>Blob</code> and so on.</p>
<p>This behavior is similar to JavaScript strings: we can’t change a character in a string, but we can make a new corrected string.</p>
</div></div>
<h2><a class="main__anchor" name="blob-as-url" href="#blob-as-url">Blob as URL</a></h2><p>A Blob can be easily used as a URL for <code>&lt;a&gt;</code>, <code>&lt;img&gt;</code> or other tags, to show its contents.</p>
<p>Thanks to <code>type</code>, we can also download/upload <code>Blob</code> objects, and the <code>type</code> naturally becomes <code>Content-Type</code> in network requests.</p>
<p>Let’s start with a simple example. By clicking on a link you download a dynamically-generated <code>Blob</code> with <code>hello world</code> contents as a file:</p>
<div id="8kxyrqfotk" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="show" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;!-- download attribute forces the browser to download instead of navigating --&gt;
&lt;a download=&quot;hello.txt&quot; href='#' id=&quot;link&quot;&gt;Download&lt;/a&gt;

&lt;script&gt;
let blob = new Blob([&quot;Hello, world!&quot;], {type: 'text/plain'});

link.href = URL.createObjectURL(blob);
&lt;/script&gt;</code></pre>
        </div>
      </div>
      
      </div><p>We can also create a link dynamically in JavaScript and simulate a click by <code>link.click()</code>, then download starts automatically.</p>
<p>Here’s the similar code that causes user to download the dynamically created <code>Blob</code>, without any HTML:</p>
<div id="heno0gg8oq" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="run" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let link = document.createElement('a');
link.download = 'hello.txt';

let blob = new Blob(['Hello, world!'], {type: 'text/plain'});

link.href = URL.createObjectURL(blob);

link.click();

URL.revokeObjectURL(link.href);</code></pre>
        </div>
      </div>
      
      </div><p><code>URL.createObjectURL</code> takes a <code>Blob</code> and creates a unique URL for it, in the form <code>blob:&lt;origin&gt;/&lt;uuid&gt;</code>.</p>
<p>That’s what the value of <code>link.href</code> looks like:</p>
<div id="mehmfse8vr" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-none"><code>blob:https://javascript.info/1e67e00e-860d-40a5-89ae-6ab0cbee6273</code></pre>
        </div>
      </div>
      
      </div><p>For each URL generated by <code>URL.createObjectURL</code> the browser stores a URL → <code>Blob</code> mapping internally. So such URLs are short, but allow to access the <code>Blob</code>.</p>
<p>A generated URL (and hence the link with it) is only valid within the current document, while it’s open. And it allows to reference the <code>Blob</code> in <code>&lt;img&gt;</code>, <code>&lt;a&gt;</code>, basically any other object that expects a URL.</p>
<p>There’s a side effect though. While there’s a mapping for a <code>Blob</code>, the <code>Blob</code> itself resides in the memory. The browser can’t free it.</p>
<p>The mapping is automatically cleared on document unload, so <code>Blob</code> objects are freed then. But if an app is long-living, then that doesn’t happen soon.</p>
<p><strong>So if we create a URL, that <code>Blob</code> will hang in memory, even if not needed any more.</strong></p>
<p><code>URL.revokeObjectURL(url)</code> removes the reference from the internal mapping, thus allowing the <code>Blob</code> to be deleted (if there are no other references), and the memory to be freed.</p>
<p>In the last example, we intend the <code>Blob</code> to be used only once, for instant downloading, so we call <code>URL.revokeObjectURL(link.href)</code> immediately.</p>
<p>In the previous example with the clickable HTML-link, we don’t call <code>URL.revokeObjectURL(link.href)</code>, because that would make the <code>Blob</code> url invalid. After the revocation, as the mapping is removed, the URL doesn’t work any more.</p>
<h2><a class="main__anchor" name="blob-to-base64" href="#blob-to-base64">Blob to base64</a></h2><p>An alternative to <code>URL.createObjectURL</code> is to convert a <code>Blob</code> into a base64-encoded string.</p>
<p>That encoding represents binary data as a string of ultra-safe “readable” characters with ASCII-codes from 0 to 64. And what’s more important – we can use this encoding in “data-urls”.</p>
<p>A <a href="https://developer.mozilla.org/en-US/docs/Web/http/Data_URIs">data url</a> has the form <code>data:[&lt;mediatype&gt;][;base64],&lt;data&gt;</code>. We can use such urls everywhere, on par with “regular” urls.</p>
<p>For instance, here’s a smiley:</p>
<div id="rwlnhce1jk" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-markup"><code>&lt;img src=&quot;data:image/png;base64,R0lGODlhDAAMAKIFAF5LAP/zxAAAANyuAP/gaP///wAAAAAAACH5BAEAAAUALAAAAAAMAAwAAAMlWLPcGjDKFYi9lxKBOaGcF35DhWHamZUW0K4mAbiwWtuf0uxFAgA7&quot;&gt;</code></pre>
        </div>
      </div>
      
      </div><p>The browser will decode the string and show the image: <img src="data:image/png;base64,R0lGODlhDAAMAKIFAF5LAP/zxAAAANyuAP/gaP///wAAAAAAACH5BAEAAAUALAAAAAAMAAwAAAMlWLPcGjDKFYi9lxKBOaGcF35DhWHamZUW0K4mAbiwWtuf0uxFAgA7"></p>
<p>To transform a <code>Blob</code> into base64, we’ll use the built-in <code>FileReader</code> object. It can read data from Blobs in multiple formats. In the <a href="file.html">next chapter</a> we’ll cover it more in-depth.</p>
<p>Here’s the demo of downloading a blob, now via base-64:</p>
<div id="uoecfl8344" data-trusted="1" class="code-example" data-highlight="[{&quot;start&quot;:5,&quot;end&quot;:6}]">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="run" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let link = document.createElement('a');
link.download = 'hello.txt';

let blob = new Blob(['Hello, world!'], {type: 'text/plain'});

let reader = new FileReader();
reader.readAsDataURL(blob); // converts the blob to base64 and calls onload

reader.onload = function() {
  link.href = reader.result; // data url
  link.click();
};</code></pre>
        </div>
      </div>
      
      </div><p>Both ways of making a URL of a <code>Blob</code> are usable. But usually <code>URL.createObjectURL(blob)</code> is simpler and faster.</p>
<div class="balance"><div class="balance__pluses">
      <div class="balance__content">
      <div class="balance__title">URL.createObjectURL(blob)</div><ul class="balance__list"><li>We need to revoke them if care about memory.</li>
<li>Direct access to blob, no “encoding/decoding”</li>
</ul></div></div><div class="balance__minuses">
      <div class="balance__content">
      <div class="balance__title">Blob to data url</div><ul class="balance__list"><li>No need to revoke anything.</li>
<li>Performance and memory losses on big <code>Blob</code> objects for encoding.</li>
</ul></div></div></div><h2><a class="main__anchor" name="image-to-blob" href="#image-to-blob">Image to blob</a></h2><p>We can create a <code>Blob</code> of an image, an image part, or even make a page screenshot. That’s handy to upload it somewhere.</p>
<p>Image operations are done via <code>&lt;canvas&gt;</code> element:</p>
<ol>
<li>Draw an image (or its part) on canvas using <a href="https://developer.mozilla.org/en-US/docs/Web/api/CanvasRenderingContext2D/drawImage">canvas.drawImage</a>.</li>
<li>Call canvas method <a href="https://developer.mozilla.org/en-US/docs/Web/api/HTMLCanvasElement/toBlob">.toBlob(callback, format, quality)</a> that creates a <code>Blob</code> and runs <code>callback</code> with it when done.</li>
</ol>
<p>In the example below, an image is just copied, but we could cut from it, or transform it on canvas prior to making a blob:</p>
<div id="cw9e2uysku" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="toolbar codebox__toolbar">
          <div class="toolbar__tool">
            <a href="#" title="run" data-action="run" class="toolbar__button toolbar__button_run"></a>
          </div>
          <div class="toolbar__tool">
            <a href="#" title="open in sandbox" target="_blank" data-action="edit" class="toolbar__button toolbar__button_edit"></a>
          </div>
        </div>
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>// take any image
let img = document.querySelector('img');

// make &lt;canvas&gt; of the same size
let canvas = document.createElement('canvas');
canvas.width = img.clientWidth;
canvas.height = img.clientHeight;

let context = canvas.getContext('2d');

// copy image to it (this method allows to cut image)
context.drawImage(img, 0, 0);
// we can context.rotate(), and do many other things on canvas

// toBlob is async operation, callback is called when done
canvas.toBlob(function(blob) {
  // blob ready, download it
  let link = document.createElement('a');
  link.download = 'example.png';

  link.href = URL.createObjectURL(blob);
  link.click();

  // delete the internal blob reference, to let the browser clear memory from it
  URL.revokeObjectURL(link.href);
}, 'image/png');</code></pre>
        </div>
      </div>
      
      </div><p>If we prefer <code>async/await</code> instead of callbacks:</p>
<div id="3ez8hcchxf" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>let blob = await new Promise(resolve =&gt; canvasElem.toBlob(resolve, 'image/png'));</code></pre>
        </div>
      </div>
      
      </div><p>For screenshotting a page, we can use a library such as <a href="https://github.com/niklasvh/html2canvas">https://github.com/niklasvh/html2canvas</a>. What it does is just walks the page and draws it on <code>&lt;canvas&gt;</code>. Then we can get a <code>Blob</code> of it the same way as above.</p>
<h2><a class="main__anchor" name="from-blob-to-arraybuffer" href="#from-blob-to-arraybuffer">From Blob to ArrayBuffer</a></h2><p>The <code>Blob</code> constructor allows to create a blob from almost anything, including any <code>BufferSource</code>.</p>
<p>But if we need to perform low-level processing, we can get the lowest-level <code>ArrayBuffer</code> from <code>blob.arrayBuffer()</code>:</p>
<div id="drttsk2vdr" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>// get arrayBuffer from blob
const bufferPromise = await blob.arrayBuffer();

// or
blob.arrayBuffer().then(buffer =&gt; /* process the ArrayBuffer */);</code></pre>
        </div>
      </div>
      
      </div><h2><a class="main__anchor" name="from-blob-to-stream" href="#from-blob-to-stream">From Blob to stream</a></h2><p>When we read and write to a blob of more than <code>2 GB</code>, the use of <code>arrayBuffer</code> becomes more memory intensive for us. At this point, we can directly convert the blob to a stream.</p>
<p>A stream is a special object that allows to read from it (or write into it) portion by portion. It’s outside of our scope here, but here’s an example, and you can read more at <a href="https://developer.mozilla.org/en-US/docs/Web/API/Streams_API">https://developer.mozilla.org/en-US/docs/Web/API/Streams_API</a>. Streams are convenient for data that is suitable for processing piece-by-piece.</p>
<p>The <code>Blob</code> interface’s <code>stream()</code> method returns a <code>ReadableStream</code> which upon reading returns the data contained within the <code>Blob</code>.</p>
<p>Then we can read from it, like this:</p>
<div id="y883vxnpf1" data-trusted="1" class="code-example">
      <div class="codebox code-example__codebox">
        
        <div class="codebox__code" data-code="1">
          <pre class="line-numbers language-javascript"><code>// get readableStream from blob
const readableStream = blob.stream();
const stream = readableStream.getReader();

while (true) {
  // for each iteration: value is the next blob fragment
  let { done, value } = await stream.read();
  if (done) {
    // no more data in the stream
    console.log('all blob processed.');
    break;
  }

   // do something with the data portion we've just read from the blob
  console.log(value);
}</code></pre>
        </div>
      </div>
      
      </div><h2><a class="main__anchor" name="summary" href="#summary">Summary</a></h2><p>While <code>ArrayBuffer</code>, <code>Uint8Array</code> and other <code>BufferSource</code> are “binary data”, a <a href="https://www.w3.org/TR/FileAPI/#dfn-Blob">Blob</a> represents “binary data with type”.</p>
<p>That makes Blobs convenient for upload/download operations, that are so common in the browser.</p>
<p>Methods that perform web-requests, such as <a href="xmlhttprequest.html">XMLHttpRequest</a>, <a href="fetch.html">fetch</a> and so on, can work with <code>Blob</code> natively, as well as with other binary types.</p>
<p>We can easily convert between <code>Blob</code> and low-level binary data types:</p>
<ul>
<li>We can make a <code>Blob</code> from a typed array using <code>new Blob(...)</code> constructor.</li>
<li>We can get back <code>ArrayBuffer</code> from a Blob using <code>blob.arrayBuffer()</code>, and then create a view over it for low-level binary processing.</li>
</ul>
<p>Conversion streams are very useful when we need to handle large blob. You can easily create a <code>ReadableStream</code> from a blob. The <code>Blob</code> interface’s <code>stream()</code> method returns a <code>ReadableStream</code> which upon reading returns the data contained within the blob.</p>
</div></article></div><div class="page__nav-wrap"><a class="page__nav page__nav_prev" href="text-decoder.html" data-tooltip="TextDecoder and TextEncoder"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">Previous lesson</span></a><a class="page__nav page__nav_next" href="file.html" data-tooltip="File and FileReader"><span class="page__nav-text"><span class="page__nav-text-shortcut"></span></span><span class="page__nav-text-alternate">Next lesson</span></a></div><div class="article-tablet-foot tablet-only"><div class="article-tablet-foot__layout"><div class="share-icons"><span class="share-icons__title">Share</span><a class="share share_tw" href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Fblob" rel="nofollow"></a><a class="share share_fb" href="https://www.facebook.com/sharer/sharer.php?s=100&p%5Burl%5D=https%3A%2F%2Fjavascript.info%2Fblob" rel="nofollow"></a></div><div class="article-tablet-foot__map"><a class="map" href="tutorial/map.html" data-action="tutorial-map"><span class="map__text">Tutorial map</span></a></div></div></div><div class="banner-bottom-carbon"><div id="javascriptinfo_iconbar"></div></div><script src="monetization.custom.js" id="javascriptinfo_script" async=""></script><script>document.getElementById("javascriptinfo_script").onload=function(){_bsa.init("custom","CKYDEK3U","placement:javascriptinfo_iconbar",{target:"#javascriptinfo_iconbar",template:'\n        <div class="iconBarFlex">\n          <a href="##statlink##" class="iconBarLink" rel="sponsored noopener" target="_blank" title="##company## — ##tagline##">\n            <div class="iconBarImage" style="background-color: ##backgroundColor##;">\n              <img height="30" width="30" src="##image##" alt="##company## logo">\n            </div>\n            <div class="iconBarText">\n              <div class="iconBarTagline">##companyTagline##</div>\n              <div class="iconBarDescription">##description##</div>\n            </div>\n          </a>\n          <a href="##ad_via_link##" class="iconBarVia" rel="sponsored noopener" target="_blank">ads via BuySellAds</a>\n        </div>\n      '})};</script><div class="comments formatted" id="comments"><div class="comments__header"><h2 class="comments__header-title"><a href="#comments" name="comments">Comments</a></h2><div class="comments__read-before"><span class="comments__read-before-link">read this before commenting…</span><div class="comments__read-before-popup"><div class="comments__read-before-popup-i"><ul><li>If you have suggestions what to improve - please <a href="https://github.com/javascript-tutorial/en.javascript.info/issues/new">submit a GitHub issue</a> or a pull request instead of commenting.</li><li>If you can't understand something in the article – please elaborate.</li><li>To insert few words of code, use the <code>&lt;code&gt;</code> tag, for several lines – wrap them in <code>&lt;pre&gt;</code> tag, for more than 10 lines – use a sandbox (<a href='https://plnkr.co/edit/?p=preview'>plnkr</a>, <a href='https://jsbin.com'>jsbin</a>, <a href='http://codepen.io'>codepen</a>…)</li></ul></div></div></div></div><div id="disqus_thread"></div><script>var disqus_config = function() { if (!this.page) this.page = {}; Object.assign(this.page, {"url":"https:\/\/javascript.info\/blob","identifier":"\/blob"}); };</script><script>var disqus_shortname = "javascriptinfo";</script><script>var disqus_enabled = true;</script></div></main></div><div class="sidebar page__sidebar sidebar sidebar_sticky-footer"><button class="sidebar__toggle" data-sidebar-toggle=""></button><a class="map" href="tutorial/map.html" data-action="tutorial-map" data-tooltip="Tutorial map"></a><div class="sidebar__inner"><div class="sidebar__content"><div class="sidebar__section"><h4 class="sidebar__section-title">Chapter</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="binary.html">Binary data, files</a></li></ul></nav></div><div class="sidebar__section"><h4 class="sidebar__section-title">Lesson navigation</h4><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#blob-as-url">Blob as URL</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#blob-to-base64">Blob to base64</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#image-to-blob">Image to blob</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#from-blob-to-arraybuffer">From Blob to ArrayBuffer</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#from-blob-to-stream">From Blob to stream</a></li><li class="sidebar__navigation-link"><a class="sidebar__link" href="#summary">Summary</a></li></ul></nav></div><div class="sidebar__section"><nav class="sidebar__navigation"><ul class="sidebar__navigation-links"><li class="sidebar__navigation-link"><a class="sidebar__link" href="#comments">Comments</a></li></ul></nav></div><div class="sidebar__section"><div class="sidebar__section-title">Share</div><a class="share share_tw sidebar__share" href="https://twitter.com/share?url=https%3A%2F%2Fjavascript.info%2Fblob" rel="nofollow"></a><a class="share share_fb sidebar__share" href="https://www.facebook.com/sharer/sharer.php?s=100&p[url]=https%3A%2F%2Fjavascript.info%2Fblob" rel="nofollow"></a></div><div class="sidebar__section"><a class="sidebar__link" href="https://github.com/javascript-tutorial/en.javascript.info/blob/master/4-binary/03-blob" rel="nofollow">Edit on GitHub</a></div><div class="sidebar__section" id="sponsorBar"><div class="sidebar__section-title" id="sponsorBarTitle"></div><div id="sponsorBarContent"></div></div><script>window.initSponsorBar()</script></div></div></div></div></div><div class="page-footer"><ul class="page-footer__list"><li class="page-footer__item page-footer__item_copy">©&nbsp;2007—2024&nbsp; Ilya Kantor</li><li class="page-footer__item page-footer__item_about"><a class="page-footer__link" href="about.html">about the project</a></li><li class="page-footer__item page-footer__item_contact"><a class="page-footer__link" href="about.html#contact-us">contact us</a></li><li class="page-footer__item page-footer__item_terms"><a class="page-footer__link" href="terms.html">terms of usage</a></li><li class="page-footer__item page-footer__item_privacy"><a class="page-footer__link" href="privacy.html">privacy policy</a></li></ul></div></body></html>